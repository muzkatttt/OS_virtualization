# Домашнее задание к семинару 7. Запуск стека для веб-приложения
1. Установить Nginx 

Для того, чтобы установить Nginx, достаточно выполнить команду:

> sudo apt -y install nginx

После установки пакета, проверяем что Nginx успешно запустился при помощи команды:

> sudo systemctl status nginx

nginx расположен /etc/nginx


2. *Настроить Nginx на работу с PHP-FPM.


3. Установить Apache. 

Установить Apache:
> sudo apt install apache2 -y

после установки apache2 проверяем статус через команду:

> systemctl status apache2

Порт 80 занят nginx, поэтому apache2 не смог запуститься.

4. *Настроить обработку PHP. Добиться одновременной работы с Nginx.

Для того, чтобы настроить работу Apache2 одновременно с Nginx, необходимо распределить их на разные порты. сначала остановим nginx:
> sudo systemctl stop nginx

проверим статус выполнения команды:
> systemctl status nginx

После того, как убедимся, что команда выполнена - проверим, каким процессом заняты порты:
> sudo ss -ntlp

Если порт 80 свободен, то проверяем статус apache2:
> sudo systemctl status apache2

запускаем apache2:

> sudo systemctl start apache2

Проверяем статус, далее проверяем, каким процессом занят 80 порт (apache2 должен занять порт 80).

перевесим apache2 на порт 9000:
> sudo nano ports.conf

В конфигурационном файле ports.conf меняем порт 80 на порт 9000

В конфигурационном файле sites-available/000-default.conf
меняем настройку порта с 80 на 9000(<VirtualHost *:9000>)

проверяем статус:
> sudo apachectl -t

перезапускаем apache2 (перезагружаем):
> sudo systemctl reload apache2

после перезагрузки можно проверить какие процессы знимают какие порты:

> sudo ss -ntlp

Как результат, apache2 висит на порту 9000, запустим nginx на 80 порт:
> sudo systemctl start nginx

Проверяем статус nginx:
> sudo systemctl status nginx

Смотрим порты:
> sudo ss -ntpl

Как результат, nginx занял порт 80, apache2 занял порт 9000 (Можно в браузере проверить заголовки ответа через F12 - там будет указан nginx). 
На консольной машине MacOS проверить данное решение через браузер трудновыполнимо, поэтому верю на слово (когда-нибудь проверю в профессиональной деятельности).

5. Настроить схему обратного прокси для Nginx (динамика - на Apache).

Сначала настроим nginx, чтобы он пробрасывал запросы дальше. Для этого в конфигурационном файле sites-available/000-default.conf подправим (внизу файла location /
закомментируем строку)


> sudo nano sites-available/000-default.conf

6. Установить MySQL. Создать новую базу данных и таблицу в ней.

7. *Установить пакет phpmyadmin и запустить его веб-интерфейс для управления MySQL.
